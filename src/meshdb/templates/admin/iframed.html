{% load static %}

{% load env_extras %}

<!DOCTYPE html>
<html>
  <head>
    <script>let MAP_BASE_URL = "{% get_env_var 'ADMIN_MAP_BASE_URL' %}";</script>
    <link rel="stylesheet" href="{% static '/admin/iframed.css'%}"/> 
    
    <link rel="stylesheet" href="{% block stylesheet %}{% static "admin/css/base.css" %}{% endblock %}">
    {% block dark-mode-vars %}
      <link rel="stylesheet" href="{% static "admin/css/dark_mode.css" %}">
      <script src="{% static "admin/js/theme.js" %}" defer></script>
    {% endblock %}
    <link rel="stylesheet" href="{% static "/admin/admin_ext.css" %}">

  </head>
  <body>
    <div id="page_container">
      <div id="admin_panel_div" class="frameGrow">
        <iframe src="panel" id="admin_panel_iframe" class="frameGrow"></iframe>
      </div>

      <div class="floating-button">
        <a href="#" class="button" style="display: inline-block" id="show_map_button">
          <img src="{% static '/admin/map/img/map.png' %}" height="16px" title="Show Map">
        </a>
      </div>

      <div id="map_controls">
        <!-- This handle is always visible, unless you're resizing, in which case
        goes big and invisible to block the iframes from stealing focus -->
        <div class="handle" id="handle">
          <span class="vert-align-helper"></span>
          <img class="handlebar" id="handlebar" src="{% static '/admin/map/img/handlebar.svg' %}" height="60px"/>
        </div>
        <!-- Only shows up during resizes -->
        <div class="handle hiddenDuringResize" id="substituteHandle">
          <span class="vert-align-helper"></span>
          <img class="handlebar" id="substituteHandlebar" src="{% static '/admin/map/img/handlebar.svg' %}" height="60px"/>
        </div>
        <div class="floating-button">
            <a href="#" class="button" style="display: inline-block" id="map_hide_button">
                <img src="{% static '/admin/map/img/cross.png' %}" height="24px" title="Hide Map">
            </a>
        </div>
        <div class="floating-button-below">
            <a href="#" class="button" style="display: inline-block" id="map_recenter_button">
                <img src="{% static '/admin/map/img/recenter.png' %}" height="24px" title="Recenter map">
            </a>
        </div>
      </div>

      <div id="map_panel_div">
      <iframe src="{% get_env_var 'ADMIN_MAP_BASE_URL' %}" id="map_panel"></iframe>
      </div>
    </div>
  <script src="{% static '/admin/map.js' %}"></script>
  </body>
</html>
